<!Doctype html>
<html>
    <head>
        
        <title>facebook test</title>
<!--        https://graph.facebook.com/oauth/access_token?client_id=607442856100225&client_secret=bbd5d253d9d6a761db06ebbc63a2a057&grant_type=client_credentials-->
<!--        access_token=607442856100225|1PKH0ji8fyGRDC96ZGWkuQw8YHk-->
        
        <meta name="viewport" content="width=device-width, user-scalable=no">
        
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.4.js"></script>
        <script type="text/javascript" src="jquery.ajax-cross-origin.min.js"></script>
        <link rel="stylesheet" href="//cdn.jsdelivr.net/xeicon/2/xeicon.min.css">

        <style>
            @import url(//fonts.googleapis.com/earlyaccess/nanumgothic.css);

            *{
                margin: 0 auto;
                font-family: 'Nanum Gothic', sans-serif;
                font-weight: 400;
            }
            body{
                background: #fafafa;
            }
            #title{
                padding: 15px 10px;
                background: #465892;
                color: white;
                text-align: center;
            }
            #profile{
                width: 120px;
                height: 120px;
                border-radius: 100%;
                border: 3px solid white;
                display: block;
                margin: auto;
            }
            #tab{
                padding: 50px;
                background: linear-gradient(135deg, #465892 0%,#6f5f9f 100%);
/*                background-image: url(https://scontent.xx.fbcdn.net/v/t1.0-9/13315540_1405055156460167_7685412883924271401_n.jpg?oh=eaa4c85273b4bc45a623af15eed84845&oe=583D3302);*/
                background-size: cover;
                color: white;
                
                
            }
            #tab > ul{
                list-style: none;
                margin: 0px;
                padding: 0px;
            }
            #tab > ul > li{
                display: inline-block;
                margin: 3px 20px;
            }
            .card{
                padding: 20px 20px;
                background: white;
                margin: 15px auto;
                width: 80%;
                box-shadow: 0px 0px 3px rgba(0, 0, 0, 0.3);
            }
            p.comment{
                font-size: 13px;
                margin: 3px;
            }
            .xi-heart{
                color: #F15F5F;
            }
        </style>
        <script type="text/javascript">

            function get_data(res){
                //Context box initialize
                $('#test').html('');
                var count = res.data.length;

                for(var i = 0; i < count; i++){
                    var content = res.data[i];

                    var card = $('<div>').addClass('card');

                    if('message' in content){
                        var msg = content.message;
                        card.html(msg.replace(/\n/gi,"</br>"));
                        card.append('</br>');
                    }
                    if('full_picture' in content){
                        var img_url = content.full_picture;
                        card.append('<br>');
                        card.append($('<img>').attr({'src': img_url, 'width': '100%'}));
                    }

                    var like_comment_box = $('<h3>').html('</br>');
                    
                    if('likes' in content){
                        var likes = content.likes.data;
                        like_comment_box.append('<i class="xi-heart"></i> ' + likes.length);
                    }
                    // None Like
                    else{
                        like_comment_box.append('<i class="xi-heart"></i> ' + 0);
                    }
                    if('comments' in content){
                        var comments = content.comments.data;
                        like_comment_box.append('\t<i class="xi-message-o"></i> '+ comments.length);

                        card.append(like_comment_box);

                        var comment_box = $('<div>').html('</br>');
                        //Make Comments List
                        for(var j = 0; j < comments.length; j++){
                            var comment_name = comments[j].from.name;
                            var comment_likes = comments[j].like_count;
                            var comment_msg = comments[j].message;
                            comment_box.append('<hr></br>');
                            comment_box.append($('<h4>').html(comment_name + ' <i class="xi-thumbs-up"></i> ' + comment_likes) );
                            comment_box.append($('<p>').addClass('comment').html(comment_msg.replace(/\n/gi,"</br>") ));
                            comment_box.append($('<h5>').html('</br>'));
//                            comment_box.append($('<h5>').text('</br></br>'));
                        }
                        card.append(comment_box);
                    }
                    // None Comment
                    else{
                        like_comment_box.append('\t<i class="xi-message-o"></i> '+0);
                        card.append(like_comment_box);
                    }                            

                    $('#test').append(card);
                }
            }
            
            
            $(document).ready(function(){
                
                $.get('/hyubamboo', function(res){
                    get_data(res);
                });
                //한양대학교 대나무숲
                $('#bamboo').click(function(){
                    $('#title').text('한양대학교 대나무숲');
                    $('#profile').attr('src','https://scontent.xx.fbcdn.net/v/t1.0-9/14022189_1089873597770733_1237635461064945047_n.jpg?oh=6ad6446d5152ee20d88ee84fee12dbcd&oe=5873B89C');
                    $.get('/hyubamboo', function(res){
                        get_data(res);
                    });
                });
                
                //한양대에리카 대신 전해드립니다.
                $('#daesin').click(function(){
                    $('#title').text('한에대전');
                    $('#profile').attr('src','https://scontent.xx.fbcdn.net/v/t1.0-9/1909873_1080170652004992_8272055158638769617_n.jpg?oh=9e15baf0390c02c3abeda022d0393b2f&oe=5879F3BB');
                    $.get('/daesin', function(res){
                        get_data(res);
                    });
                });
                //한에사피
                
                
                $('#love').click(function(){
                    $('#title').text('한에사피');
                    $('#profile').attr('src','https://scontent.xx.fbcdn.net/v/l/t1.0-9/12523822_1012697888810916_2448908396646436421_n.jpg?oh=b84a6bab3773bc7374be291e11978eda&oe=5877489A');
                    $.get('/love', function(res){
                        get_data(res);
                    });
                });
                //총학생회
                $('#student').click(function(){
                    $('#title').text('총학생회');
                    $('#profile').attr('src','https://scontent.xx.fbcdn.net/v/t1.0-9/12391169_1394590304173319_4716394767427625812_n.jpg?oh=3bd5334e8e399cf702ebcc2b80bb1f3b&oe=588587AD');
                    $.get('/student', function(res){
                        get_data(res);
                    });
                });

            });
                
            
        </script>
        
    </head>
    <body>
        
        <h3 id="title">한양대학교 대나무숲</h3>
        <div id="tab">
            <img src="https://scontent.xx.fbcdn.net/v/t1.0-9/14022189_1089873597770733_1237635461064945047_n.jpg?oh=6ad6446d5152ee20d88ee84fee12dbcd&oe=5873B89C" id="profile">
            </br>
            <ul>
                <li id="bamboo">대나무숲</li>
                <li id="daesin">한에대전</li>
                <li id="love">한에사피</li>
                <li id="student">총학생회</li>
            </ul>
        </div>
        
        <div id="test">
        </div>
        
    </body>
</html>